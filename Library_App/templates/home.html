{% comment %} Should have: - welcome jumbotron - login/logout button If logged
in: - Search bar - list of available book cards (with buttons to borrow) - list
of currently borrowed books {% endcomment %}
<!DOCTYPE html>
<html lang="en">
  {% load static %}
  <head>
    <!-- Latest compiled and minified CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Library</title>
  </head>
  <body class="bg-secondary">
    <!-- Header -->
    <header class="p-3 bg-dark text-white">
      <div class="container">
        <div
          class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start"
        >
          <a
            href="/"
            class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none"
          >
            <svg
              class="bi me-2"
              width="40"
              height="32"
              role="img"
              aria-label="Bootstrap"
            >
              <use xlink:href="#bootstrap"></use>
            </svg>
          </a>

          <ul
            class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0"
          >
            <li>
              <a href="#" class="nav-link px-2 text-secondary"
                ><svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="30"
                  height="30"
                  fill="#ffc107"
                  class="bi bi-book-half"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M8.5 2.687c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"
                  />
                </svg>
                <span class="ps-2">My Library</span>
              </a>
            </li>
            {% comment %}
            <li><a href="#" class="nav-link px-2 text-white">Features</a></li>
            <li><a href="#" class="nav-link px-2 text-white">Pricing</a></li>
            <li><a href="#" class="nav-link px-2 text-white">FAQs</a></li>
            <li><a href="#" class="nav-link px-2 text-white">About</a></li>
            {% endcomment %}
          </ul>

          <div class="text-end">
            {% if user %}
            <form method="POST" action="" class="d-inline">
              {% csrf_token %}
              <button
                type="submit"
                name="logout"
                value="1"
                class="btn btn-warning"
              >
                Log out
              </button>
            </form>
            {% else%}
            <a href="/register/" class="btn btn-outline-light me-2">
              Register
            </a>
            <a href="/login/" class="btn btn-warning">Login</a>
            {% endif %}
          </div>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <div class="container col-xxl-8 px-4 py-5">
      <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
        <div class="col-10 col-sm-8 col-lg-6">
          <img src="{% static "Library_App/reading.png" %}" class="d-block
          mx-lg-auto img-fluid" alt="Bootstrap Themes" width="700" height="500"
          loading="lazy" />
        </div>
        <div class="col-lg-6">
          <h1 class="display-5 fw-bold text-body-emphasis lh-1 mb-3">
            {% if user %} Welcome, {{ user.f_name }}! {% else %} Welcome, guest!
            {% endif %}
          </h1>
          <p class="lead">
            This is a simple library where you can browse and checkout books.
            Scroll down to view your books, and login!
          </p>
          <div class="d-grid gap-2 d-md-flex justify-content-md-start">
            {% if user %}
            <form method="POST" action="">
              {% csrf_token %}
              <button
                type="submit"
                name="logout"
                value="1"
                class="btn btn-warning btn-lg px-4 me-md-2"
              >
                Log out
              </button>
            </form>

            {% else%}
            <a href="/login/" class="btn btn-warning btn-lg px-4 me-md-2">
              Login
            </a>

            <a href="/register/" class="btn btn-outline-light btn-lg px-4">
              Register
            </a>
            {% endif%}
          </div>
        </div>
      </div>
    </div>

    {% if user %}

    <!--All books - donote how many are available - option to borrow if they are available-->
    <div class="container px-4 text-center">
      <h2 class="p-3 border-bottom border-dark border-5 rounded">All Books</h2>

      <div class="row row-cols-1 row-cols-md-3 mb-3 text-center">
        {% if books%} {% for book in books %}
        <div class="col mt-3">
          <div class="card mb-4 rounded-3 shadow-sm bg-dark text-light">
            <div class="card-header py-3">
              {% if book.available %}
              <h4 class="my-0 fw-normal">Available</h4>
              {% else %}
              <h4 class="my-0 fw-normal">Unavailable</h4>
              {% endif %}
            </div>
            <div class="card-body">
              <h1 class="card-title pricing-card-title">{{book.title}}</h1>
              <ul class="list-unstyled mt-3 mb-4">
                <li>Author: {{book.author}}</li>
                <li>Subject: {{book.subject}}</li>
                <li>{{book.total_copies}} Total Copies</li>
                <li>{{book.available_copies}} Available Copies</li>
              </ul>
              {% if book.available %}
              <form
                method="POST"
                action="{% url 'home' %}"
                style="display: inline"
              >
                {% csrf_token %}
                <input
                  type="hidden"
                  name="book_id"
                  value="{{ book.book_id }}"
                />
                <button
                  type="submit"
                  name="borrow"
                  value="1"
                  class="w-100 btn btn-lg btn-outline-warning"
                >
                  Borrow
                </button>
              </form>
              {% else %}
              <button
                type="button"
                class="w-100 btn btn-lg btn-outline-secondary disabled"
              >
                Borrow
              </button>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %} {% else %}
        <p>no books in library</p>
        {% endif %}
      </div>
    </div>
    <!--User's currently checked out books - button to return -->
    <div class="container px-4 text-center">
      <h2 class="p-3 border-bottom border-dark border-5 rounded">
        Checked Out
      </h2>
      <div class="row row-cols-1 row-cols-md-3 mb-3 text-center">
        {% if borrowed_books %} {% for book in borrowed_books%}
        <div class="col mt-3">
          <div class="card mb-4 rounded-3 shadow-sm bg-dark text-light">
            <div class="card-body">
              <h1 class="card-title pricing-card-title">{{book.title}}</h1>
              <ul class="list-unstyled mt-3 mb-4">
                <li>Author: {{book.author}}</li>
                <li>Subject: {{book.subject}}</li>
              </ul>
              <form
                method="POST"
                action="{% url 'home' %}"
                style="display: inline"
              >
                {% csrf_token %}
                <input
                  type="hidden"
                  name="book_id"
                  value="{{ book.book_id }}"
                />
                <button
                  type="submit"
                  name="return"
                  value="1"
                  class="w-100 btn btn-lg btn-outline-warning"
                >
                  Return
                </button>
              </form>
            </div>
          </div>
        </div>
        {% endfor %} {% else %}
      </div>
      <div class="text-center">
        <p>No books checked out</p>
      </div>
      {% endif %}
    </div>
    <!-- Add and if role is teacher vs. student and their functionalities-->
    {%endif%} {% comment %} put footer here {% endcomment %}
  </body>
</html>
